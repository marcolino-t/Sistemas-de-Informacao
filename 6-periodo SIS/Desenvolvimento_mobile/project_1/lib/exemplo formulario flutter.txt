import 'package:flutter/material.dart';
import 'package:flutter/services.dart';

void main() => runApp(MeuApp());

class MeuApp extends StatefulWidget {
  @override
  MeuFormulario createState() {
    return MeuFormulario();
  }
}

class MeuFormulario extends State<MeuApp> {
  final _formKey = GlobalKey<FormState>();
  final _scaffoldKey = GlobalKey<ScaffoldState>();
  final _scaffoldMsgKey = GlobalKey<ScaffoldMessengerState>();

  @override
  Widget build(BuildContext context) {
    
    return MaterialApp(
      scaffoldMessengerKey: _scaffoldMsgKey,
      home: Scaffold(
        key: _scaffoldKey,
        appBar: AppBar(title: new Text("Exemplo de Formulário")),
        body: SingleChildScrollView(
          child: Container(
            margin: new EdgeInsets.all(15.0),
            child: Form(
                key: _formKey,
                child: meuFormularioUI(_scaffoldKey, _formKey, _scaffoldMsgKey)
              ),
            ))
      )
    );
    
    
  }
}

Widget meuFormularioUI(var _scaffoldKey, var _formKey, var _scaffoldMsgKey) {
  var _nome;
  var _idade;
  
  return Column(children: [
    Text("Meu Formulário"),
    TextFormField(
      decoration: InputDecoration(labelText: "Nome:"),
      maxLength: 50,
      onSaved: (val) {
        _nome = val;
      }
    ),
    TextFormField(
      decoration: InputDecoration(labelText: "Idade:"),
      maxLength: 3,
      keyboardType: TextInputType.number,
      inputFormatters: <TextInputFormatter>[
        FilteringTextInputFormatter.digitsOnly
      ],
      onSaved: (val) {
        _idade = val;
      }
    ),
    ElevatedButton(
      child: Text("Calcular"),
      onPressed: () {
         _formKey.currentState.save();
         _scaffoldMsgKey.currentState.showSnackBar(
          SnackBar(
            content: Text("Olá ${_nome}, você tem ${_idade} anos")
          )
        );

      }
    )
  ]);
}
